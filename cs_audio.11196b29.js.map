{"version":3,"sources":["js/helper.js","js/cs_audio.js"],"names":["print","names","values","str","value","Number","toFixed","audioCtx","listener","n1","n2","n3","n4","n5","n6","n7","n8","AudioContext","window","webkitAudioContext","analysers","music_event","CustomEvent","init","audioElements","positionX","positionY","positionZ","setPosition","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","pannerModel","innerCone","outerCone","outerGain","distanceModel","maxDistance","refDistance","rollOff","orientationX","orientationY","orientationZ","addEventListener","event","document","querySelector","info","global_up","point_up","global_forward","point_forward","track","createMediaElementSource","channels7","splitterNode","ChannelSplitterNode","numberOfOutputs","connect","audioPack","playElement","pos","gain","order","createAnalyser","console","log","gainNode","createGain","children","classList","remove","add","panner","PannerNode","panningModel","rolloffFactor","coneInnerAngle","coneOuterAngle","coneOuterGain","destination","setInterval","updateWave","dataArray","Uint8Array","frequencyBinCount","maxValues","i","length","getByteTimeDomainData","maxValue","num","Math","max","style","backgroundColor","min","a1","a2","arraysEqual","dispatchEvent","playAudio","thisButton","audioElement","state","resume","dataset","playing","play","getEl","pause","getAttribute","setAttribute","id","getElementById","a3","a4","a5","a6","a7","a8","playAll","chooseAudio","replaceWith","cloneNode","stopPlayAll","aim","display","fileList","files","url","URL","createObjectURL","src"],"mappings":"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","file":"cs_audio.11196b29.js","sourceRoot":"..","sourcesContent":["export function print(names, values) {\n  // console.log(values);\n  let str = '';\n  for (let name of names.values()) {\n    str += name+'\\t';\n  }\n  str += '\\n';\n  for (let value of values.values()) {\n    str += Number(value).toFixed(2)+'\\t';\n  }\n  str += '\\n';\n\n  return str;\n}\n\n","import {print} from './helper.js'\n\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\nlet audioCtx;\nlet listener;\nlet n1, n2, n3, n4, n5, n6, n7, n8;\nlet analysers = [n1, n2, n3, n4, n5, n6, n7, n8];\nlet music_event = new CustomEvent('music', { 'detail': '' });\nmusic_event.maxValues = [0,0,0,0,0,0,0,0];\nfunction init(audioElements) {\n\n  audioCtx = new AudioContext();\n  listener = audioCtx.listener;\n\n  // Let's set the position of our listener based on where our boombox is.\n  const posX = 0;\n  const posY = 0;\n  const posZ = 0;\n\n  // set position of the listener\n  if(listener.positionX) {\n    listener.positionX.value = posX;\n    listener.positionY.value = posY;\n    listener.positionZ.value = posZ;\n  } else {\n    listener.setPosition(posX, posY, posZ);\n  }\n  // set the orientation of the head of listener\n  if(listener.forwardX) {\n    listener.forwardX.value = 0;\n    listener.forwardY.value = 0;\n    listener.forwardZ.value = -1;\n    listener.upX.value = 0;\n    listener.upY.value = 1;\n    listener.upZ.value = 0;\n  } else {\n    listener.setOrientation(0, 0, -1, 0, 1, 0);\n  }\n\n  const pannerModel = 'HRTF';\n\n  const innerCone = 40;\n  const outerCone = 50;\n  const outerGain = 1; // omnisource\n  const distanceModel = 'linear';\n  const maxDistance = 20000;\n  const refDistance = 1;\n\n  const rollOff = 0.9;\n\n  const positionX = posX;\n  const positionY = posY;\n  const positionZ = posZ;\n\n  const orientationX = 0.0;\n  const orientationY = 0.0;\n  const orientationZ = 1.0;\n\n  // let's use the class method for creating our panner node and pass in all those parameters we've set.\n\n  function panner(pos) {\n    return new PannerNode(audioCtx, {\n      panningModel: pannerModel,\n      distanceModel: distanceModel,\n      positionX: positionX+pos[0],\n      positionY: positionY+pos[1],\n      positionZ: positionZ+pos[2],\n      orientationX: orientationX,\n      orientationY: orientationY,\n      orientationZ: orientationZ,\n      refDistance: refDistance,\n      maxDistance: maxDistance,\n      rolloffFactor: rollOff,\n      coneInnerAngle: innerCone,\n      coneOuterAngle: outerCone,\n      coneOuterGain: outerGain\n    })\n  }\n\n  // listen on the face angle change from cs_face_orientation.js\n  window.addEventListener('build', function (event) {\n    const info = document.querySelector('.info');\n\n    let global_up = event.point_up;\n    let global_forward = event.point_forward;\n\n    // info.textContent = print(['u: x','y','z'],global_up);\n    // info.textContent += print(['f: x','y','z'],global_forward);\n    // Change the position of head and recalculate the volume on each ear\n\n    listener.forwardX.value = global_forward[0];\n    listener.forwardY.value = global_forward[1];\n    listener.forwardZ.value = global_forward[2];\n    listener.upX.value = global_up[0];\n    listener.upY.value = global_up[1];\n    listener.upZ.value = global_up[2];\n    // console.log('up',global_up);\n    // console.log('forward',global_forward);\n    // indicator.style.left  = (-maxY*(y-90)/180 - 10) + \"px\";\n    // indicator.style.top = (-maxX*(x-90)/180 - 10) + \"px\";\n    // indicator.style.transform = \"rotate(\"+z+\"deg)\";\n  });\n\n  const track = audioCtx.createMediaElementSource(channels7);\n  const channelsCount = 8;\n  const splitterNode = new ChannelSplitterNode(audioCtx, { numberOfOutputs: channelsCount });\n  track.connect(splitterNode);\n\n  // const mergerNode = new ChannelMergerNode(audioCtx, { numberOfInputs: channelsCount });\n\n  for (let audioPack of audioElements) {\n    // add each track to the IMU control\n    let playElement = audioPack[0];\n    let pos = audioPack[1];\n    let gain = audioPack[2];\n    let order = audioPack[3];\n    analysers[order] = audioCtx.createAnalyser();\n    // let analyser = analysers[order];\n    console.log(pos);\n    const gainNode = audioCtx.createGain();\n    gainNode.gain.value = gain;\n    playElement.addEventListener('click', function() {\n      if (gainNode.gain.value === 0) {\n        playElement.children[0].classList.remove(\"slash\");\n        gainNode.gain.value = 1;\n      } else {\n        playElement.children[0].classList.add(\"slash\");\n        gainNode.gain.value = 0;\n      }\n    }, false);\n    // const pannerOptions = {pan: 0};\n    // const stereoPanner = new StereoPannerNode(audioCtx, pannerOptions);\n    splitterNode.connect(gainNode, order).connect(analysers[order]).connect(panner(pos)).connect(audioCtx.destination);\n    }\n\n  function updateWave() {\n    let dataArray = new Uint8Array(analysers[0].frequencyBinCount);\n    let maxValues = [null, null, null, null, null, null, null, null];\n    for (let i = 0; i < analysers.length; i ++) {\n      analysers[i].getByteTimeDomainData(dataArray);\n      let maxValue = 128;\n      for (let num of dataArray) {\n        if (num > maxValue) {\n          maxValue = num;\n        }\n      }\n      maxValue = Math.max(0, maxValue - 128);\n      maxValues[i] = maxValue;\n      audioElements[i][0].style.backgroundColor = \"rgb(\"+Math.min(255, -maxValue * 20+224)+\", 225, \"+\n        Math.min(255, maxValue * 10+226)+\")\";\n    }\n    const arraysEqual = (a1, a2) => {\n      for (let i = 0; i < 8; i++) {\n        if (a1[i] !== a2[i]) {return false;}\n      }\n      return true;\n    }\n    if (!arraysEqual(maxValues, music_event.maxValues)) {\n      music_event.maxValues = maxValues;\n      // console.log(maxValues);\n      window.dispatchEvent(music_event);\n    }\n  }\n  setInterval(updateWave, 50);\n}\n\n\nfunction playAudio(thisButton, audioElement) {\n  if(!audioCtx) {\n    init(audioElements);\n  }\n\n  if (audioCtx.state === 'suspended') {\n    audioCtx.resume();\n  }\n\n  if (thisButton.dataset.playing === 'false') {\n    var playPromise = audioElement.play();\n    thisButton.dataset.playing = 'true';\n    getEl('startPlay').style.backgroundColor = 'rgb(54,146,220)';\n    // if track is playing pause it\n  } else if (thisButton.dataset.playing === 'true') {\n    audioElement.pause();\n    thisButton.dataset.playing = 'false';\n    getEl('startPlay').style.backgroundColor = 'rgb(225,226,226)';\n  }\n\n  let state = thisButton.getAttribute('aria-checked') === \"true\";\n  thisButton.setAttribute( 'aria-checked', state ? \"false\" : \"true\" );\n}\n\nconst getEl = (id) => document.getElementById(id);\nconst a1 = [getEl('b1'), [-5, 0,-5], 1, 0]; // FL\nconst a2 = [getEl('b2'), [5, 0, -5], 1, 1]; // FR\nconst a3 = [getEl('b3'), [0, 0, -5], 1, 2]; // C\nconst a4 = [getEl('b4'), [0, 0,  0], 0, 3]; // LFE (mute by default)\nconst a5 = [getEl('b5'), [-5, 0, 5], 1, 4]; // BL\nconst a6 = [getEl('b6'), [5, 0,  5], 1, 5]; // BR\nconst a7 = [getEl('b7'), [-5, 0, 0], 1, 6]; // SL\nconst a8 = [getEl('b8'), [ 5, 0, 0], 1, 7]; // SR\nconst audioElements = [a1, a2, a3, a4, a5, a6, a7, a8];\n\n\nlet playAll = getEl('startPlay');\nlet channels7;\n\nfunction chooseAudio(id){\n  channels7 = getEl(id);\n  channels7.replaceWith(channels7.cloneNode(true)); // we must use a new element\n  channels7 = getEl(id);\n  playAll.addEventListener('click', function () {\n    console.log('id', id);\n    playAudio(this, channels7);\n  }, false)\n}\n\nchooseAudio('channels7'); // default\n\nfunction stopPlayAll() {\n  let thisButton = getEl('startPlay');\n  if (thisButton.dataset.playing === 'true') {\n    channels7.pause();\n    thisButton.dataset.playing = 'false';\n    getEl('startPlay').style.backgroundColor = 'rgb(225,226,226)';\n  }\n}\n\ngetEl('audio1').addEventListener('click', function () {\n  stopPlayAll();\n  const id = this.dataset.aim;\n  audioCtx = null;\n  playAll.replaceWith(playAll.cloneNode(true)); // we must use a new element\n  playAll = getEl('startPlay');\n  console.log(id);\n  chooseAudio(id);\n  getEl('AllowLocalFile').style.display = \"none\";\n})\n\ngetEl('audio2').addEventListener('click', function () {\n  stopPlayAll();\n  const id = this.dataset.aim;\n  audioCtx = null;\n  playAll.replaceWith(playAll.cloneNode(true)); // we must use a new element\n  playAll = getEl('startPlay');\n  console.log(id);\n  chooseAudio(id);\n  getEl('AllowLocalFile').style.display = \"none\";\n})\n\ngetEl('audioLocal').addEventListener('click', function (){\n  stopPlayAll();\n  getEl('AllowLocalFile').style.display = \"block\";\n})\n\ngetEl(\"inputFile\").addEventListener(\"change\", function () {\n  stopPlayAll();\n  var fileList = this.files;\n  console.log(fileList);\n  if (fileList.length >0) {\n    audioCtx = null;\n    playAll.replaceWith(playAll.cloneNode(true)); // we must use a new element\n    playAll = getEl('startPlay');\n    let url = window.URL.createObjectURL(fileList[0]);\n    getEl('aimLocalAudio').src = url;\n    channels7 = getEl('aimLocalAudio');\n    playAll.addEventListener('click', function () {\n      console.log('url', url);\n      playAudio(this, channels7);\n    }, false)\n  }\n}, false);\n"]}